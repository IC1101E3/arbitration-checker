
# Arbitration-Checker

## Описание проекта
Этот проект представляет собой десктопное приложение на Python, разработанное для автоматизации поиска арбитражных дел на сайте [kad.arbitr.ru](https://kad.arbitr.ru/) по ИНН. Приложение использует PyQt5 для создания графического интерфейса пользователя (GUI), Selenium для веб-скрапинга и PostgreSQL для хранения данных. Оно позволяет пользователям вводить ИНН, скрапить соответствующие арбитражные дела, сохранять их в локальной базе данных, фильтровать сохраненные данные и экспортировать их в форматы CSV или JSON.

## Возможности
-   **Поиск по ИНН**: Введите ИНН и найдите связанные арбитражные дела на kad.arbitr.ru.
-   **Сохранение данных**: Автоматическое сохранение найденных дел в базе данных PostgreSQL, предотвращая дублирование.
-   **Фильтрация**: Фильтруйте сохраненные дела по номеру дела, ИНН, а также по диапазону дат.
-   **Экспорт данных**: Экспортируйте отфильтрованные или все дела в форматы CSV или JSON.
-   **Логирование**: Подробное логирование всех операций и ошибок для удобства отладки и мониторинга.

## Структура проекта
```
arbitration-checker/
├── core/
│   ├── application_logic.py    # Бизнес-логика, координация между GUI, скрапером, БД
│   
├── database/
│   ├── db_manager.py           # Управление подключением к БД и CRUD-операциями
│   └── init_db.sql             # SQL-сценарий для инициализации схемы БД
├── gui/
│   └── main_window.py          # Основное окно графического интерфейса PyQt5
├── scraper/
│   └── arbitr_scraper.py       # Логика веб-скрапинга с использованием Selenium
├── utils/
│   └── logger.py               # Конфигурация системы логирования
├── tests/                      # Тесты
├── main.py                     # Точка входа в приложение
└── requirements.txt            # Список зависимостей Python
└── README.md                   # Описание проекта
└── settings.ini                # Настройки приложения (БД, WebDriver)
```

## Установка

### 1. Клонирование репозитория
```bash
git clone https://github.com/IC1101E3/arbitration-checker.git
cd arbitration-checker
```

### 2. Создание и активация виртуального окружения
```bash
python3 -m venv venv
source venv/bin/activate  # Для Linux/macOS
# venv\Scripts\activate   # Для Windows
```

### 3. Установка зависимостей Python
```bash
pip install -r requirements.txt
```

### 4. Установка и настройка PostgreSQL
Убедитесь, что у вас установлен PostgreSQL. Если нет, установите его в соответствии с инструкциями для вашей операционной системы.

После установки, настройте пользователя и базу данных, как указано в `settings.ini`. По умолчанию:
-   **Имя пользователя**: `postgres`
-   **Пароль**: `your_password` (рекомендуется изменить)
-   **Имя базы данных**: `arbitration_db`

Пример команд для Linux (с использованием `sudo -u postgres`):
```bash
sudo -u postgres psql -c "ALTER USER postgres WITH PASSWORD 'your_password';"
sudo -u postgres psql -c "CREATE DATABASE arbitration_db;"
```

### 5. Установка Chromium Browser и Xvfb (для безголового режима Selenium в Linux)
```bash
sudo apt-get update
sudo apt-get install -y chromium-browser xvfb
```

## Использование

### Запуск приложения
```bash
python main.py
```

После запуска появится графический интерфейс:

1.  Введите ИНН в поле **ИНН для скрапинга** и нажмите кнопку **Найти (Скрапинг)**, чтобы получить новые арбитражные дела с сайта.
2.  Для просмотра сохраненных дел и применения фильтров используйте поля **Фильтр по номеру дела**, **Фильтр по ИНН**, **Диапазон дат** и нажмите кнопку **Фильтровать (Поиск сохраненных)**.
3.  Для экспорта отображенных данных в файл используйте кнопки **Экспорт в CSV** или **Экспорт в JSON**.

## Тестирование
Для запуска тестов используйте `pytest` из корневого каталога проекта:
```bash
pytest
```
## Лицензия
Этот проект распространяется под лицензией MIT. Подробности см. в файле `LICENSE`.
